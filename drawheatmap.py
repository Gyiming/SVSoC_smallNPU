import numpy as np
from matplotlib import pyplot as plt
from matplotlib import cm 
from matplotlib import axes


def draw_heatmap(data1,xlabels,ylabels):
    [rows, cols] = data1.shape
    '''
    for i in range(rows):
        for j in range(cols):
            data1[i,j] = 181/data1[i,j]
	    data1[i,j] = round((181-data1[i,j])/181,2)
    '''
    cmap = cm.Blues    
    figure=plt.figure(facecolor='w')
    #ax=figure.add_subplot(2,1,1,position=[0.1,0.15,0.8,0.8])
    ax=figure.add_subplot(1,1,1)
    plt.rcParams.update({'font.size':14})
    plt.xticks(fontsize=14)
    plt.yticks(fontsize=14)
    ax.set_yticks(range(len(ylabels)))
    ax.set_yticklabels(ylabels)
    ax.set_xticks(range(len(xlabels)))
    ax.set_xticklabels(xlabels)
    #vmax=data[0][0]
    #vmin=data[0][0]
    map=ax.imshow(data1,interpolation='nearest',cmap=cmap,aspect='auto',vmin=-0.5,vmax=0.8)
    cb=plt.colorbar(mappable=map,cax=None,ax=None,shrink=1)
    for y in range(data1.shape[0]):
        for x in range(data1.shape[1]):
            plt.text(x, y, str(round(data1[y,x]*100))+'%', horizontalalignment='center',color='black')
    #plt.xlabel('predict_accuracy')
    #plt.ylabel('predict_latency')
    plt.xlabel('Total frames',fontsize=14)
    plt.ylabel('Energy budget',fontsize=14)
    plt.show()
	
#a=np.random.rand(3,3)

#performance1 sensing<isp<vision
p1=np.array([[1.31,1.5,1.64,1.82,2.11],
#[1.21,1.21,1.21,1.21,1.21,1.21,1.21,1.21,1.21,2.05],
[1.24,1.33,1.59,1.78,1.99],
#[1.16,1.16,1.16,1.16,1.16,1.16,1.16,1.16,1.17,1.92],
[1.25,1.37,1.52,1.67,1.89],
#[1.12,1.12,1.12,1.12,1.12,1.12,1.12,1.12,1.13,1.87],
[1.2,1.33,1.48,1.56,1.79],
#[1.08,1.08,1.08,1.08,1.08,1.08,1.08,1.08,1.08,1.72],
[1.14,1.26,1.34,1.49,1.69],
#[1.05,1.05,1.05,1.05,1.05,1.05,1.05,1.05,1.05,1.64],
[1.08,1.2,1.29,1.45,1.6]])
xlabels=[0.2,0.4,0.6,0.8,1.0]
ylabels=[1,1.2,1.4,1.6,1.8,2.0]




#energy1 sensing<isp<vision
e1=np.array([[1.56,1.58,1.59,1.61,1.62],
#[1.21,1.21,1.21,1.21,1.21,1.21,1.21,1.21,1.21,2.05],
[1.54,1.55,1.58,1.59,1.61],
#[1.16,1.16,1.16,1.16,1.16,1.16,1.16,1.16,1.17,1.92],
[1.52,1.55,1.58,1.59,1.61],
#[1.12,1.12,1.12,1.12,1.12,1.12,1.12,1.12,1.13,1.87],
[1.5,1.52,1.55,1.59,1.58],
#[1.08,1.08,1.08,1.08,1.08,1.08,1.08,1.08,1.08,1.72],
[1.48,1.5,1.52,1.54,1.57],
#[1.05,1.05,1.05,1.05,1.05,1.05,1.05,1.05,1.05,1.64],
[1.46,1.49,1.5,1.53,1.55]])
xlabels=[0.2,0.4,0.6,0.8,1.0]
ylabels=[1,1.2,1.4,1.6,1.8,2.0]



#performance2 isp<sensing<vision
p2=np.array([[1.73,1.9,2.21,2.51,2.99],
#[1.21,1.21,1.21,1.21,1.21,1.21,1.21,1.21,1.21,2.05],
[1.63,1.85,2.01,2.47,2.85],
#[1.16,1.16,1.16,1.16,1.16,1.16,1.16,1.16,1.17,1.92],
[1.6,1.78,2.06,2.41,2.72],
#[1.12,1.12,1.12,1.12,1.12,1.12,1.12,1.12,1.13,1.87],
[1.52,1.73,1.88,2.16,2.58],
#[1.08,1.08,1.08,1.08,1.08,1.08,1.08,1.08,1.08,1.72],
[1.43,1.57,1.9,2.02,2.44],
#[1.05,1.05,1.05,1.05,1.05,1.05,1.05,1.05,1.05,1.64],
[1.36,1.52,1.78,1.98,2.31]])
xlabels=[0.2,0.4,0.6,0.8,1.0]
ylabels=[1,1.2,1.4,1.6,1.8,2.0]


#energy2 isp<sensing<vision
e2=np.array([[1.56,1.58,1.59,1.61,1.62],
#[1.21,1.21,1.21,1.21,1.21,1.21,1.21,1.21,1.21,2.05],
[1.54,1.56,1.57,1.59,1.61],
#[1.16,1.16,1.16,1.16,1.16,1.16,1.16,1.16,1.17,1.92],
[1.52,1.54,1.56,1.58,1.59],
#[1.12,1.12,1.12,1.12,1.12,1.12,1.12,1.12,1.13,1.87],
[1.5,1.52,1.53,1.55,1.58],
#[1.08,1.08,1.08,1.08,1.08,1.08,1.08,1.08,1.08,1.72],
[1.47,1.5,1.52,1.54,1.57],
#[1.05,1.05,1.05,1.05,1.05,1.05,1.05,1.05,1.05,1.64],
[1.45,1.47,1.5,1.53,1.55]])
xlabels=[0.2,0.4,0.6,0.8,1.0]
ylabels=[1,1.2,1.4,1.6,1.8,2.0]


#performance3 sensing<vision<isp
p3=np.array([[1.35,1.47,1.71,1.88,2.11],
#[1.21,1.21,1.21,1.21,1.21,1.21,1.21,1.21,1.21,2.05],
[1.26,1.43,1.61,1.77,1.99],
#[1.16,1.16,1.16,1.16,1.16,1.16,1.16,1.16,1.17,1.92],
[1.24,1.4,1.48,1.66,1.89],
#[1.12,1.12,1.12,1.12,1.12,1.12,1.12,1.12,1.13,1.87],
[1.19,1.3,1.44,1.57,1.78],
#[1.08,1.08,1.08,1.08,1.08,1.08,1.08,1.08,1.08,1.72],
[1.18,1.2,1.38,1.5,1.69],
#[1.05,1.05,1.05,1.05,1.05,1.05,1.05,1.05,1.05,1.64],
[1.11,1.2,1.28,1.44,1.6]])
xlabels=[0.2,0.4,0.6,0.8,1.0]
ylabels=[1,1.2,1.4,1.6,1.8,2.0]

#energy3 sensing<vision<isp
e3=np.array([[1.8,1.82,1.84,1.85,1.87],
#[1.21,1.21,1.21,1.21,1.21,1.21,1.21,1.21,1.21,2.05],
[1.76,1.79,1.8,1.83,1.86],
#[1.16,1.16,1.16,1.16,1.16,1.16,1.16,1.16,1.17,1.92],
[1.74,1.76,1.78,1.81,1.84],
#[1.12,1.12,1.12,1.12,1.12,1.12,1.12,1.12,1.13,1.87],
[1.71,1.73,1.77,1.79,1.82],
#[1.08,1.08,1.08,1.08,1.08,1.08,1.08,1.08,1.08,1.72],
[1.69,1.72,1.74,1.76,1.8],
#[1.05,1.05,1.05,1.05,1.05,1.05,1.05,1.05,1.05,1.64],
[1.66,1.68,1.72,1.76,1.78]])
xlabels=[0.2,0.4,0.6,0.8,1.0]
ylabels=[1,1.2,1.4,1.6,1.8,2.0]

#performance4 vision<sensing<isp
p4=np.array([[1.75,1.9,2.3,2.59,2.99],
#[1.21,1.21,1.21,1.21,1.21,1.21,1.21,1.21,1.21,2.05],
[1.67,1.81,2.03,2.38,2.85],
#[1.16,1.16,1.16,1.16,1.16,1.16,1.16,1.16,1.17,1.92],
[1.61,1.72,1.99,2.4,2.72],
#[1.12,1.12,1.12,1.12,1.12,1.12,1.12,1.12,1.13,1.87],
[1.56,1.68,1.84,2.16,2.58],
#[1.08,1.08,1.08,1.08,1.08,1.08,1.08,1.08,1.08,1.72],
[1.48,1.66,1.78,2.12,2.44],
#[1.05,1.05,1.05,1.05,1.05,1.05,1.05,1.05,1.05,1.64],
[1.39,1.56,1.7,2.01,2.32]])
xlabels=[0.2,0.4,0.6,0.8,1.0]
ylabels=[1,1.2,1.4,1.6,1.8,2.0]

#energy4 vision<sensing<isp
e4=np.array([[2.12,2.14,2.16,2.2,2.22],
#[1.21,1.21,1.21,1.21,1.21,1.21,1.21,1.21,1.21,2.05],
[2.07,2.1,2.14,2.16,2.19],
#[1.16,1.16,1.16,1.16,1.16,1.16,1.16,1.16,1.17,1.92],
[2.03,2.07,2.1,2.12,2.17],
#[1.12,1.12,1.12,1.12,1.12,1.12,1.12,1.12,1.13,1.87],
[2.01,2.04,2.08,2.1,2.14],
#[1.08,1.08,1.08,1.08,1.08,1.08,1.08,1.08,1.08,1.72],
[1.97,2,2.03,2.05,2.09],
#[1.05,1.05,1.05,1.05,1.05,1.05,1.05,1.05,1.05,1.64],
[1.92,1.96,1.99,2.06,2.09]])
xlabels=[0.2,0.4,0.6,0.8,1.0]
ylabels=[1,1.2,1.4,1.6,1.8,2.0]

#performance5 isp<visioni<sensing
p5=np.array([[2.06,2.25,2.75,3.24,3.78],
#[1.21,1.21,1.21,1.21,1.21,1.21,1.21,1.21,1.21,2.05],
[1.95,2.42,2.48,3.07,3.63],
#[1.16,1.16,1.16,1.16,1.16,1.16,1.16,1.16,1.17,1.92],
[1.94,2.08,2.49,2.83,3.49],
#[1.12,1.12,1.12,1.12,1.12,1.12,1.12,1.12,1.13,1.87],
[1.88,2.12,2.49,2.72,3.32],
#[1.08,1.08,1.08,1.08,1.08,1.08,1.08,1.08,1.08,1.72],
[1.7,2.05,2.38,2.65,3.14],
#[1.05,1.05,1.05,1.05,1.05,1.05,1.05,1.05,1.05,1.64],
[1.67,2.03,2.15,2.53,2.99]])
xlabels=[0.2,0.4,0.6,0.8,1.0]
ylabels=[1,1.2,1.4,1.6,1.8,2.0]

#energy5 isp<visioni<sensing
e5=np.array([[1.8,1.82,1.83,1.86,1.88],
#[1.21,1.21,1.21,1.21,1.21,1.21,1.21,1.21,1.21,2.05],
[1.77,1.78,1.81,1.83,1.86],
#[1.16,1.16,1.16,1.16,1.16,1.16,1.16,1.16,1.17,1.92],
[1.74,1.76,1.78,1.81,1.84],
#[1.12,1.12,1.12,1.12,1.12,1.12,1.12,1.12,1.13,1.87],
[1.71,1.73,1.77,1.79,1.82],
#[1.08,1.08,1.08,1.08,1.08,1.08,1.08,1.08,1.08,1.72],
[1.67,1.72,1.75,1.77,1.8],
#[1.05,1.05,1.05,1.05,1.05,1.05,1.05,1.05,1.05,1.64],
[1.65,1.67,1.71,1.75,1.78]])
xlabels=[0.2,0.4,0.6,0.8,1.0]
ylabels=[1,1.2,1.4,1.6,1.8,2.0]

#performance6 vision<isp<sensing
p6=np.array([[2.15,2.24,2.64,3.09,3.78],
#[1.21,1.21,1.21,1.21,1.21,1.21,1.21,1.21,1.21,2.05],
[1.96,2.31,2.55,2.93,3.63],
#[1.16,1.16,1.16,1.16,1.16,1.16,1.16,1.16,1.17,1.92],
[1.98,2.16,2.52,2.77,3.52],
#[1.12,1.12,1.12,1.12,1.12,1.12,1.12,1.12,1.13,1.87],
[1.84,2.04,2.34,2.87,3.32],
#[1.08,1.08,1.08,1.08,1.08,1.08,1.08,1.08,1.08,1.72],
[1.72,1.93,2.28,2.71,3.14],
#[1.05,1.05,1.05,1.05,1.05,1.05,1.05,1.05,1.05,1.64],
[1.74,1.97,2.37,2.48,2.99]])
xlabels=[0.2,0.4,0.6,0.8,1.0]
ylabels=[1,1.2,1.4,1.6,1.8,2.0]

#energy6 visioni<isp<sensing
e6=np.array([[2.12,2.15,2.17,2.19,2.22],
#[1.21,1.21,1.21,1.21,1.21,1.21,1.21,1.21,1.21,2.05],
[2.08,2.09,2.15,2.16,2.19],
#[1.16,1.16,1.16,1.16,1.16,1.16,1.16,1.16,1.17,1.92],
[2.03,2.06,2.11,2.13,2.17],
#[1.12,1.12,1.12,1.12,1.12,1.12,1.12,1.12,1.13,1.87],
[1.98,2.02,2.06,2.1,2.14],
#[1.08,1.08,1.08,1.08,1.08,1.08,1.08,1.08,1.08,1.72],
[1.96,1.97,2.02,2.07,2.12],
#[1.05,1.05,1.05,1.05,1.05,1.05,1.05,1.05,1.05,1.64],
[1.91,1.95,2,2.04,2.09]])
xlabels=[0.2,0.4,0.6,0.8,1.0]
ylabels=[1,1.2,1.4,1.6,1.8,2.0]

#performance7 sensing<isp<vision, check twice
p11=np.array([[1.15,1.29,1.49,1.64,2.11],
#[1.21,1.21,1.21,1.21,1.21,1.21,1.21,1.21,1.21,2.05],
[1.17,1.2,1.37,1.56,1.99],
#[1.16,1.16,1.16,1.16,1.16,1.16,1.16,1.16,1.17,1.92],
[1.08,1.19,1.31,1.58,1.94],
#[1.12,1.12,1.12,1.12,1.12,1.12,1.12,1.12,1.13,1.87],
[1.04,1.13,1.32,1.51,1.78],
#[1.08,1.08,1.08,1.08,1.08,1.08,1.08,1.08,1.08,1.72],
[1.01,1.1,1.22,1.41,1.69],
#[1.05,1.05,1.05,1.05,1.05,1.05,1.05,1.05,1.05,1.64],
[0.98,1.06,1.22,1.34,1.6]])
xlabels=[0.2,0.4,0.6,0.8,1.0]
ylabels=[0.1,0.4,0.7,1,1.3,1.6]

p11 = np.array([
    [0,0,0,0,0,0,0,2.37],
    [0,0,0,0,0,0,2.11,2.37],
    [0,0,0,0,0,1.85,2.11,2.37],
    [0,0,0,0,1.58,1.85,2.11,2.37],
    [0,0,0,1.36,1.58,1.85,2.11,2.37],
    [0,0,1.2,1.36,1.58,1.85,2.11,2.37],
    [0,1.08,1.2,1.36,1.58,1.85,2.11,2.37],
    [1,1.08,1.2,1.36,1.58,1.85,2.11,2.37]
    ])
e11 = np.array([
    [0,0,0,0,0,0,0,0.81],
    [0,0,0,0,0,0,0.81,0.87],
    [0,0,0,0,0,0.81,0.88,0.94],
    [0,0,0,0,0.81,0.89,0.96,1.02],
    [0,0,0,0.81,0.9,0.99,1.06,1.12],
    [0,0,0.81,0.92,1.03,1.11,1.06,1.25],
    [0,0.81,0.96,1.08,1.19,1.27,1.35,1.4],
    [0.81,1.02,1.19,1.31,1.41,1.49,1.62,1.61]
    ])
p1505 = np.array([
    [0,0,0,0,0,0,0,1.02],
    [0,0,0,0,0,0,1.01,1.04],
    [0,0,0,0,0,0.99,1.04,1.07],
    [0,0,0,0,1,1.04,1.09,1.09],
    [0,0,0,1,1.04,1.11,1.13,1.11],
    [0,0,0.98,1,1.06,1.08,1.1,1.23],
    [0,0.97,1.01,1.03,1.07,1.15,1.27,1.34],
    [0.97,0.98,1,1.08,1.17,1.25,1.34,1.43]
    ])
e1505 = np.array([
    [0,0,0,0,0,0,0,0.97],
    [0,0,0,0,0,0,0.97,0.95],
    [0,0,0,0,0,0.97,0.95,0.94],
    [0,0,0,0,0.97,0.95,0.94,0.93],
    [0,0,0,0.97,0.95,0.96,0.93,0.99],
    [0,0,0.97,0.94,0.93,0.92,0.97,0.95],
    [0,0.97,0.94,0.92,0.91,0.94,0.95,0.96],
    [0.98,0.93,0.91,0.93,0.96,1,1.03,1.11]
    ])
e201 = np.array([
    [0,0,0,0,0,0,0,0.68],
    [0,0,0,0,0,0,0.68,0.74],
    [0,0,0,0,0,0.68,0.75,0.81],
    [0,0,0,0,0.68,0.76,0.83,0.89],
    [0,0,0,0.68,0.77,0.85,0.93,0.92],
    [0,0,0.68,0.8,0.89,0.92,0.94,0.95],
    [0,0.68,0.83,0.95,1.05,1.14,1.21,1.11],
    [0.69,0.89,1.05,1.17,1.28,1.36,1.43,1.49]
    ])
xlabels1=[1,2,3,4,5,6,7,8]
ylabels1=[1,2,3,4,5,6,7,8]

p88siv=np.array([[1.01,1.04,1.09,1.2,1.47],

[1,1.03,1.08,1.19,1.44],

[1,1.04,1.09,1.18,1.41],

[1,1.02,1.06,1.17,1.35],

[1,1.02,1.05,1.13,1.34],

[1,1.01,1.04,1.12,1.33]])

e88siv=np.array([[0.92,0.93,0.94,0.96,0.99],

[0.93,0.93,0.94,0.95,0.99],

[0.92,0.93,0.94,0.95,0.99],

[0.92,0.93,0.93,0.95,0.99],

[0.92,0.92,0.93,0.95,0.99],

[0.92,0.92,0.93,0.95,0.98]])

p88vis=np.array([[1.02,1.07,1.11,1.15,1.21],

[1.02,1.06,1.11,1.15,1.21],

[1.02,1.06,1.12,1.16,1.21],

[1.02,1.07,1.11,1.14,1.21],

[1.01,1.06,1.1,1.14,1.21],

[1,1.04,1.08,1.12,1.2]])

e88vis=np.array([[0,0,0,0,0,0],

[0,0,0,0,0,0],

[0,0,0,0,0,0],

[0,0,0,0,0,0],

[0,0,0,0,0,0]])

xlabels = [5,6,7,8,9,10]
ylabels = [90,70,50,30,10]
'''
avglat=np.average(p88siv)+np.average(p88vis)
avgene=np.average(e88siv)+np.average(e88vis)
print(avglat, avgene)
'''
'''
p88siv = np.load("latency_result.npy")
e88siv = np.load("energy_result.npy")
'''
draw_heatmap(e88vis,xlabels,ylabels)


